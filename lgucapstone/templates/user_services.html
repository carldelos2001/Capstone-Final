<!DOCTYPE html>
<html lang="en">
<head>
  {% load static %}
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="{% static 'user_services1.css' %}"> 
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  <title>Argao-LGU-Resolutions</title>
  <link rel="icon" type="image/jpeg" href="{% static 'argao_logo.jpg'%}">
</head>
<body>
  <div class="container_nav"></div>
  
  <div class="logo">
    <img class="img_logo" src="{% static 'argao_logo.jpg'%}" id="home1" alt="Logo">
  </div>

  <div class="nav_bar">
    <label class="header-menu-item" id="home">Home</label>
    <label class="header-menu-item" id="ordinances">Ordinances</label>
    <label class="header-menu-item" id="resolutions">Resolutions</label>
    <label class="header-menu-item selected" id="services">Services</label>
    <label class="header-menu-item" id="announcement">Announcement</label>

    <!-- User Profile Dropdown -->
    <div class="dropdown ms-auto">
      <a href="#" class="d-flex align-items-center text-dark text-decoration-none dropdown-toggle" id="dropdownUser" data-bs-toggle="dropdown" aria-expanded="false">
        <img src="{% static 'user_profile.png' %}" alt="User Profile" class="rounded-circle" width="32" height="32">
        <span id="userName" class="ms-2">Guest</span>
      </a>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownUser">
        <li><a class="dropdown-item" href="{% url 'lgucapstone' %}">Login</a></li>
      </ul>
    </div>
  </div>
  
  <style>
    .nav_bar{
      font-family: "Poppins", sans-serif;
      font-size: 1rem;
    }

    @font-face {
      font-family: "Poppins";
      src: url("{% static 'fonts/Poppins-Regular.ttf' %}") format("truetype");
    }

    @font-face {
      font-family: "Poppins";
      src: url("{% static 'fonts/Poppins-Bold.ttf' %}") format("truetype");
      font-weight: bold;
    }

    body {
      font-family: "Poppins", sans-serif;
      font-size: 1rem;
    }

    .main-content {
      padding: 20px;
      margin-top: 80px; /* Added margin to the top */
    }

    .service-item {
      background-color: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 5px;
      padding: 15px;
      margin-bottom: 15px;
    }

    .service-title {
      font-weight: bold;
      margin-bottom: 10px;
    }

    .service-details {
      margin-left: 20px;
    }

    .service-details table {
      width: 100%;
      border-collapse: collapse;
    }

    .service-details th, .service-details td {
      border: 1px solid #dee2e6;
      padding: 8px;
      text-align: left;
    }

    .service-details th {
      background-color: #e9ecef;
    }

    .feedback-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1000;
    }
  </style>

  <!-- Main Content -->
  <div class="main-content">
    <!-- User Profile Dropdown -->
    
   

    <div class="container mt-4">
      <h1 class="text-center mb-4">Services Offered by the Sangguniang Bayan</h1>
      
      <!-- Search Bar -->
      <div class="mb-4">
        <input type="text" id="serviceSearch" class="form-control" placeholder="Search for a service...">
      </div>


      <!-- Feedback Button -->
      <div class="feedback-button">
        <a href="/user_feedback" class="btn btn-link p-0" title="Ask Us or Give Feedback">
          <img src="{% static 'askus.png' %}" alt="Ask Us" width="50" height="50">
        </a>
      </div>
      <style>
        
        .feedback-button {
          position: fixed;
          bottom: 20px;
          right: 20px;
          z-index: 1000;
          background-color: white;
          border-radius: 50%;
          padding: 5px;
        }
        .feedback-button img {
          transition: transform 0.3s ease;
        }
        .feedback-button:hover img {
          transform: scale(1.1);
        }
        /* Add this to your CSS file */
          .rounded-circle {
          border-radius: 50%; /* Ensures the image is rounded */
          border: 2px solid #ddd; /* Optional: Add border */
          object-fit: cover; /* Ensures the image covers the area */
}
      </style>
      
      <!-- Services List -->
      <div id="servicesList" class="mb-4">
        <!-- Services will be dynamically added here -->
      </div>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.9.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.9.1/firebase-database-compat.js"></script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // Initialize Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyAMwvUHsWFkTmJyfzuh4DxzOrMYEjcXHvI",
      authDomain: "lgucapstoneproject-b94fe.firebaseapp.com",
      databaseURL: "https://lgucapstoneproject-b94fe-default-rtdb.firebaseio.com",
      projectId: "lgucapstoneproject-b94fe",
      storageBucket: "lgucapstoneproject-b94fe.appspot.com",
      messagingSenderId: "984934888272",
      appId: "1:984934888272:web:e835b8e02ae708629a7255",
      measurementId: "G-F84YQS756S"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Function to load services
    function loadServices() {
      const servicesList = document.getElementById('servicesList');
      servicesList.innerHTML = ''; // Clear existing content

      db.ref('services').once('value').then((snapshot) => {
        snapshot.forEach((childSnapshot) => {
          const service = childSnapshot.val();
          const serviceElement = document.createElement('div');
          serviceElement.className = 'service-item';
          serviceElement.innerHTML = `
            <div class="service-title">${service.serviceTitle}</div>
            <div class="service-details">
              <table>
                <tr>
                  <th>Office or Division</th>
                  <td>${service.officeOrDivision}</td>
                </tr>
                <tr>
                  <th>Classification</th>
                  <td>${service.classification}</td>
                </tr>
                <tr>
                  <th>Type of Transaction</th>
                  <td>${service.transactionType}</td>
                </tr>
                <tr>
                  <th>Who May Avail</th>
                  <td>${service.whoMayAvail}</td>
                </tr>
                <tr>
                  <th>Requirements</th>
                  <td>${service.requirement}</td>
                </tr>
                <tr>
                  <th>Client Steps</th>
                  <td>${service.clientStep}</td>
                </tr>
                <tr>
                  <th>Agency Action</th>
                  <td>${service.agencyAction}</td>
                </tr>
                <tr>
                  <th>Fees</th>
                  <td>${service.fees}</td>
                </tr>
                <tr>
                  <th>Processing Time</th>
                  <td>${service.processingTime}</td>
                </tr>
                <tr>
                  <th>Person Responsible</th>
                  <td>${service.personResponsible}</td>
                </tr>
              </table>
            </div>
          `;
          servicesList.appendChild(serviceElement);
        });
      }).catch((error) => {
        console.error("Error loading services:", error);
      });
    }

    // Search functionality
    document.getElementById('serviceSearch').addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase();
      const serviceItems = document.querySelectorAll('.service-item');
      
      serviceItems.forEach(item => {
        const title = item.querySelector('.service-title').textContent.toLowerCase();
        if (title.includes(searchTerm)) {
          item.style.display = '';
        } else {
          item.style.display = 'none';
        }
      });
    });

    // Load services when the page loads
    document.addEventListener('DOMContentLoaded', loadServices);


    // Get user from localStorage
    const userName = localStorage.getItem('userName');
      if (userName) {
        document.getElementById('userName').textContent = userName;
        // Update dropdown menu for logged-in user
        const dropdownMenu = document.querySelector('.dropdown-menu');
        dropdownMenu.innerHTML = '<li><a class="dropdown-item" href="{% url "lgucapstone" %}" onclick="logout()">Logout</a></li>';
      } else {
        document.getElementById('userName').textContent = 'Guest';  
      }
  </script>

  <script>
    document.getElementById('home1').addEventListener('click', function() {
      window.location.href = '/home';
    });

    document.getElementById('home').addEventListener('click', function() {
      window.location.href = '/home';
    });
    document.getElementById('ordinances').addEventListener('click', function() {
      window.location.href = '/user_ordinance';
    });
    document.getElementById('resolutions').addEventListener('click', function() {
      window.location.href = '/user_resolution';
    });
    document.getElementById('services').addEventListener('click', function() {
      window.location.href = '/user_services';
    });
    document.getElementById('announcement').addEventListener('click', function() {
      window.location.href = '/user_announcement';
    });
  </script>
</body>
</html>
