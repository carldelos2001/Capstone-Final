<!DOCTYPE html>
<html lang="en">
<head>
  {% load static %}
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/jpeg" href="{% static 'fav_argao.png'%}">
    <title>Home SB Management Portal</title>
    <style>
      @font-face {
            font-family: "Poppins";
            src: url("{% static 'fonts/Poppins-Regular.ttf' %}") format("truetype");
        } 
        
        /* Base styles */
        body {
            font-family: "Poppins", sans-serif;
            margin: 0;
            padding: 0;
           
        }

        /* Navbar styles */
        .container_nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background-color: #ffffff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .logo img {
            height: 50px;
            width: auto;
        }

        .nav_bar {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
        }

        .header-menu-item {
            padding: 0.5rem 1rem;
            color: black;
            cursor: pointer;
            transition: background-color 0.8s ease, color 0.8s ease;
            text-decoration: none;
            font-size: 18px;
        }

        .header-menu-item:hover {
            color: #52AE77;
            text-decoration: underline;
            
           
        }

        .header-menu-item.selected {
            color: #52AE77;
            text-decoration: underline;

            
        }

        .dropdown {
            margin-left: auto;
            display: flex;
            align-items: center;
        }

        .dropdown-toggle {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .dropdown-toggle img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }

        #userName {
            margin-right: 0.5rem;
            color: #565D6D;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            right: 1rem;
            top: 60px;
            background-color: #ffffff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-radius: 4px;
            padding: 0.5rem 0;
        }

        .dropdown-menu a {
            display: block;
            padding: 0.5rem 1rem;
            color: #565D6D;
            text-decoration: none;
        }

        .dropdown-menu a:hover {
            background-color: #f0f0f0;
        }

        .menu-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .nav_bar {
                position: fixed;
                top: 0;
                right: -250px;
                height: 100vh;
                width: 250px;
                flex-direction: column;
                background-color: #ffffff;
                box-shadow: -2px 0 4px rgba(0,0,0,0.1);
                transition: right 0.3s ease;
                justify-content: flex-start;
                padding-top: 60px;
            }

            .nav_bar.active {
                right: 0;
                z-index: 1000;
            }

            .header-menu-item {
                width: 100%;
                text-align: left;
                padding: 1rem;
            }

            .menu-toggle {
                display: block;
                position: fixed;
                top: 1rem;
                right: 1rem;
                z-index: 1000;
            }

            .dropdown {
                margin-left: 0;
                width: 100%;
                justify-content: flex-start;
                padding: 1rem;
            }

            .dropdown-menu {
                position: static;
                box-shadow: none;
                padding-left: 1rem;
            }
        }
        .rounded-circle {
          border-radius: 50%; /* Ensures the image is rounded */
          border: 2px solid #ddd; /* Optional: Add border */
          object-fit: cover; /* Ensures the image covers the area */
        }

        /* Highlight start: New styles for added sections */
        .welcome-section {
    position: relative;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    text-align: center;
    overflow: hidden;
    text-transform: uppercase;
    font-weight: bold;
}

/* Add a dimming overlay */
.welcome-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
   
    z-index: 1; /* Place the overlay behind the text */
}

/* Ensure the text is above the overlay */
.welcome-section h2 {
    position: relative;
    z-index: 2;
}

h2{
    font-weight: bold;
            font-size: clamp(1rem, 4vw, 1.5rem);
            line-height: 1.2;
            margin: 0;
            padding: 0 10px;
            word-wrap: break-word;
            color: black;
            
}

/* For medium screens (tablets) */
@media (min-width: 768px) {
    .welcome-section h1 {
        font-size: 3rem;
    }
}

/* For large screens (desktops) */
@media (min-width: 1200px) {
    .welcome-section h1 {
        font-size: 4rem;
    }
}


        .official-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem;
            margin: 2rem 0;
        }

        .official-section img {
            width: 200px;
            height: 200px;
            object-fit: cover;
            border-radius: 50%;
        }

        .official-info {
            width: 60%;
        }

        .argao-description {
            background-color: #f0f0f0;
            padding: 2rem;
            text-align: center;
        }

        .footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 1rem;
        }
        /* Highlight end: New styles for added sections */
    </style>
</head>
<body>
    <div class="container_nav">
        <div class="logo">
            <img src="{% static 'argao_logo.jpg' %}" alt="Logo">
        </div>

        <button class="menu-toggle" aria-label="Toggle menu">☰</button>

        <div class="nav_bar">
            <a href="/home" class="header-menu-item selected">Home</a>
            <a href="/user_ordinance" class="header-menu-item">
                Ordinances
                <span class="notification-badge" id="ordinancesBadge" style="display:none">0</span>
            </a>
            <a href="/user_resolution" class="header-menu-item">
                Resolutions
                <span class="notification-badge2" id="resolutionsBadge" style="display:none">0</span>
            </a>
            <a href="/user_services" class="header-menu-item">Services</a>
            <a href="/user_announcement" class="header-menu-item">
                Announcement
                <span class="notification-badge3" id="announcementsBadge" style="display:none">0</span>
            </a>
            <a href="/user_feedback" class="header-menu-item">Feedback</a>
        </div>

        <div class="dropdown ms-auto">
            <a href="#" class="d-flex align-items-center text-dark text-decoration-none dropdown-toggle" id="dropdownUser" data-bs-toggle="dropdown" aria-expanded="false">
            <img src="{% static 'user_profile.png' %}" alt="User Profile" class="rounded-circle" width="32" height="32">
            <span id="userName" class="ms-2">Guest</span>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownUser">
              <li><a class="dropdown-item" href="{% url 'lgucapstone' %}" id="loginLogoutLink">Login</a></li>
            </ul>
          </div>
    </div>

    <!-- Highlight start: New sections -->
    <div class="welcome-section">
        <div class="official-section">
            <img src="{% static 'argao_logo.jpg' %}" alt="Logo">
        </div>
      <div class="overlay"></div>
        <h2>LGU-Argao SB Management Portal</h2>
    </div>

    

    <div class="official-section">
        <img src="{% static 'mayor_allan.jpg' %}" alt="Mayor of Argao">
        <div class="official-info">
            <h2>Mayor of Argao</h2>
            <p>Honorable Mayor Allan Sesaldo achieved the 4th ranking with a 83.1 % rating from the latest survey of the 𝗕𝗼𝘀𝗲𝘀 𝗻𝗴 𝗕𝗮𝘆𝗮𝗻 - 𝗔𝗻𝗻𝘂𝗮𝗹 𝗥𝗲𝗽𝗼𝗿𝘁 𝟮𝟬𝟮𝟯 Job Performance Ratings for all Municipal Mayors from the Province of Cebu.</p>
        </div>
    </div>

    <div class="official-section">
        <div class="official-info">
            <h2>Vice Mayor of Argao</h2>
            <p>Atty. Orvi G. Ortega is a Filipino lawyer and politician. He is the current vice mayor of Argao, a municipality in Cebu Province, Central Visayas Region or Region 7, Philippines.</p>
        </div>
        <img src="{% static 'atty orvi.png' %}" alt="Vice Mayor of Argao">
    </div>

<!-- Slideshow Section -->
<div class="slideshow-container">
    <div class="mySlides">
        <img src="{% static 'slide1.jpg' %}" alt="Argao Beach">
        <div class="text">Beautiful Beaches of Argao</div>
    </div>

    <div class="mySlides">
        <img src="{% static 'slide2.jpg' %}" alt="San Miguel Church">
        <div class="text">Historic Saint Michael Archangel Church</div>
    </div>

    <div class="mySlides">
        <img src="{% static 'slide3.jpg' %}" alt="Argao Heritage">
        <div class="text">Rich Cultural Heritage</div>
    </div>

    <div class="mySlides">
        <img src="{% static 'slide4.jpg' %}" alt="Argao Heritage">
        <div class="text">Rich Cultural Heritage</div>
    </div>

    <div class="mySlides">
        <img src="{% static 'slide5.jpg' %}" alt="Argao Heritage">
        <div class="text">Famous delicacies</div>
    </div>

    <!-- Navigation arrows -->
    <a class="prev" onclick="plusSlides(-1)">&#10094;</a>
    <a class="next" onclick="plusSlides(1)">&#10095;</a>

    <!-- Dots/circles -->
    <div style="text-align:center">
        <span class="dot" onclick="currentSlide(1)"></span>
        <span class="dot" onclick="currentSlide(2)"></span>
        <span class="dot" onclick="currentSlide(3)"></span>
        <span class="dot" onclick="currentSlide(4)"></span>
        <span class="dot" onclick="currentSlide(5)"></span>
    </div>
</div>

    <div class="argao-description">
        <h2>About Argao</h2>
        <p>Argao is a municipality in the province of Cebu, Philippines. Known for its rich history, beautiful beaches, and delicious delicacies like torta, Argao offers a unique blend of cultural heritage and natural beauty. The town is home to several Spanish-era structures, including the San Miguel Arcangel Parish Church, and is famous for its traditional guitar-making industry.</p>
    </div>

    <footer class="footer">
        <p>&copy; 2024 Municipality of Argao. All rights reserved.</p>
        <p>Contact: info@argao.gov.ph | Address: Municipal Hall, Argao, Cebu, Philippines</p>
    </footer>
    <!-- Highlight end: New sections -->

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script>
        // Slideshow functionality
        let slideIndex = 1;
        showSlides(slideIndex);

        function plusSlides(n) {
            showSlides(slideIndex += n);
        }

        function currentSlide(n) {
            showSlides(slideIndex = n);
        }

        function showSlides(n) {
            let i;
            let slides = document.getElementsByClassName("mySlides");
            let dots = document.getElementsByClassName("dot");
            
            if (n > slides.length) {slideIndex = 1}
            if (n < 1) {slideIndex = slides.length}
            
            for (i = 0; i < slides.length; i++) {
                slides[i].style.opacity = "0";
                slides[i].style.display = "none";
            }
            for (i = 0; i < dots.length; i++) {
                dots[i].className = dots[i].className.replace(" active", "");
            }
            
            slides[slideIndex-1].style.display = "block";
            setTimeout(() => {
                slides[slideIndex-1].style.opacity = "1";
            }, 10);
            dots[slideIndex-1].className += " active";
        }

        // Auto advance slides every 5 seconds
        setInterval(function() {
            plusSlides(1);
        }, 5000);

        // Toggle mobile menu
        const menuToggle = document.querySelector('.menu-toggle');
        const navBar = document.querySelector('.nav_bar');

        menuToggle.addEventListener('click', () => {
            navBar.classList.toggle('active');
            menuToggle.textContent = navBar.classList.contains('active') ? '✕' : '☰';
        });

        // Toggle dropdown menu
        const dropdownToggle = document.querySelector('.dropdown-toggle');
        const dropdownMenu = document.querySelector('.dropdown-menu');

        dropdownToggle.addEventListener('click', (e) => {
            e.stopPropagation();
            dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', () => {
            dropdownMenu.style.display = 'none';
        });

        // Get user from localStorage
        const userName = localStorage.getItem('userName');
        if (userName) {
            document.getElementById('userName').textContent = userName;
            
            const dropdownMenu = document.querySelector('.dropdown-menu');
            dropdownMenu.innerHTML = '<li><a class="dropdown-item" href="{% url "lgucapstone" %}" onclick="logout()">Logout</a></li>';
        } else {
            document.getElementById('userName').textContent = 'Guest';  
            document.getElementById('welcomeUserName').textContent = 'Guest';
        }

        // Logout function
    window.logout = function() {
      localStorage.removeItem('userName');
      window.location.href = '/home';
    }
        // Initialize Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAMwvUHsWFkTmJyfzuh4DxzOrMYEjcXHvI",
            authDomain: "lgucapstoneproject-b94fe.firebaseapp.com",
            databaseURL: "https://lgucapstoneproject-b94fe-default-rtdb.firebaseio.com",
            projectId: "lgucapstoneproject-b94fe",
            storageBucket: "lgucapstoneproject-b94fe.appspot.com",
            messagingSenderId: "984934888272",
            appId: "1:984934888272:web:e835b8e02ae708629a7255",
            measurementId: "G-F84YQS756S"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function checkForNewItems() {
      const lastCheckTimeOrdinances = localStorage.getItem('lastCheckTimeOrdinances') || 0;
      const lastCheckTimeResolutions = localStorage.getItem('lastCheckTimeResolutions') || 0;
      const lastCheckTimeAnnouncements = localStorage.getItem('lastCheckTimeAnnouncements') || 0;
      const currentTime = Date.now();
      const currentPath = window.location.pathname;

      // Check ordinances
      const ordinancesRef = ref (db, 'ordinances');
      get(ordinancesRef).then((snapshot) => {
        if (snapshot.exists() && currentPath !== '/user_ordinance') {
          const newOrdinances = Object.values(snapshot.val()).filter(
            ordinance => ordinance.createdAt > parseInt(lastCheckTimeOrdinances)
          );
          const badge = document.getElementById('ordinancesBadge');
          if (newOrdinances.length > 0) {
            badge.textContent = newOrdinances.length;
            badge.style.display = 'inline';
          }
        }
      });

      // Check resolutions
      const resolutionsRef = ref(db, 'resolutions');
      get(resolutionsRef).then((snapshot) => {
        if (snapshot.exists() && currentPath !== '/user_resolution') {
          const newResolutions = Object.values(snapshot.val()).filter(
            resolution => resolution.createdAt > parseInt(lastCheckTimeResolutions)
          );
          const badge = document.getElementById('resolutionsBadge');
          if (newResolutions.length > 0) {
            badge.textContent = newResolutions.length;
            badge.style.display = 'inline';
          }
        }
      });

      // Check announcements
      const announcementsRef = ref(db, 'announcements');
      get(announcementsRef).then((snapshot) => {
        if (snapshot.exists() && currentPath !== '/user_announcement') {
          const newAnnouncements = Object.values(snapshot.val()).filter(
            announcement => announcement.createdAt > parseInt(lastCheckTimeAnnouncements)
          );
          const badge = document.getElementById('announcementsBadge');
          if (newAnnouncements.length > 0) {
            badge.textContent = newAnnouncements.length;
            badge.style.display = 'inline';
          }
        }
      });

      // Update last check times only when visiting respective pages
      if (currentPath === '/user_ordinance') {
        localStorage.setItem('lastCheckTimeOrdinances', currentTime.toString());
      } else if (currentPath === '/user_resolution') {
        localStorage.setItem('lastCheckTimeResolutions', currentTime.toString());
      } else if (currentPath === '/user_announcement') {
        localStorage.setItem('lastCheckTimeAnnouncements', currentTime.toString());
      }
    }

        // Check for new items when page loads
        document.addEventListener('DOMContentLoaded', checkForNewItems);
    </script>

    <style>
        /* Slideshow styles */
        .slideshow-container {
            max-width: 1000px;
            position: relative;
            margin: auto;
            margin-bottom: 2rem;
            background: #000;
        }

        .mySlides {
            display: none;
            position: relative;
            height: 400px;
        }

        .mySlides img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            transition: opacity 1s ease-in-out;
        }

        .prev, .next {
            cursor: pointer;
            position: absolute;
            top: 50%;
            width: auto;
            padding: 16px;
            margin-top: -22px;
            color: white;
            font-weight: bold;
            font-size: 18px;
            transition: 0.6s ease;
            border-radius: 0 3px 3px 0;
            user-select: none;
            background-color: rgba(0,0,0,0.8);
            z-index: 2;
        }

        .next {
            right: 0;
            border-radius: 3px 0 0 3px;
        }

        .prev:hover, .next:hover {
            background-color: rgba(0,0,0,0.9);
        }

        .text {
            color: #f2f2f2;
            font-size: 15px;
            padding: 8px 12px;
            position: absolute;
            bottom: 0;
            width: 100%;
            text-align: center;
            background-color: rgba(0,0,0,0.6);
            z-index: 2;
        }

        .dot {
            cursor: pointer;
            height: 15px;
            width: 15px;
            margin: 0 2px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
            transition: background-color 0.6s ease;
        }

        .active, .dot:hover {
            background-color: #717171;
        }

        .mySlides {
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }

        .notification-badge {
            background-color: rgb(241, 38, 38);
            color: white;
            font-size: 12px;
            padding: 2px 6px;
            border-radius: 50%;
            margin-left: 5px;
            position: relative;
            top: -8px;
        }
        .notification-badge2 {
            background-color: rgb(241, 38, 38);
            color: white;
            font-size: 12px;
            padding: 2px 6px;
            border-radius: 50%;
            margin-left: 5px;
            position: relative;
            top: -8px;
        }
        .notification-badge3 {
            background-color: rgb(241, 38, 38);
            color: white;
            font-size: 12px;
            padding: 2px 6px;
            border-radius: 50%;
            margin-left: 5px;
            position: relative;
            top: -8px;
        }
    </style>
</body>
</html>